{"version":3,"sources":["webpack:///./src/components/User.vue?5047","webpack:///./src/views/ChatRoom.vue?d444","webpack:///./src/components/User.vue?c371","webpack:///src/components/User.vue","webpack:///./src/components/User.vue?5b35","webpack:///./src/components/User.vue","webpack:///./src/components/ChatMsg.vue?3155","webpack:///src/components/ChatMsg.vue","webpack:///./src/components/ChatMsg.vue?bac3","webpack:///./src/components/ChatMsg.vue","webpack:///src/views/ChatRoom.vue","webpack:///./src/views/ChatRoom.vue?f33e","webpack:///./src/views/ChatRoom.vue","webpack:///./src/components/ChatMsg.vue?e131","webpack:///./src/components/ChatboxButtonSvg.vue?c119","webpack:///./src/components/ChatboxButtonSvg.vue","webpack:///./src/views/ChatRoom.vue?8390"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","allOnlineUsers","length","_l","user","key","id","attrs","_m","msg","index","directives","name","rawName","value","expression","modifiers","domProps","on","$event","type","indexOf","_k","keyCode","sendMessage","apply","arguments","target","composing","text","trim","$forceUpdate","stopPropagation","preventDefault","staticRenderFns","params","userId","avatar","account","props","Object","default","component","status","currentUser","message","_f","timeStamp","mixins","required","computed","$store","state","components","User","ChatMsg","ChatBoxButtonSvg","data","chatroomList","userStatus","userMsg","created","loginMessageHistory","$socket","emit","methods","watch","handler","unshift","deep","sockets","ONLINE_LIST_UPDATE","commit","script"],"mappings":"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","file":"js/chunk-9aef8dc4.b90b6c5d.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"public-container\"},[_c('div',{staticClass:\"users-container\"},[_c('header',{staticClass:\"users__header\"},[_c('p',{staticClass:\"users__title\"},[_vm._v(\"上線使用者(\"+_vm._s(_vm.allOnlineUsers.length)+\")\")])]),_vm._l((_vm.allOnlineUsers),function(user){return _c('User',{key:user.id,attrs:{\"user\":user}})})],2),_c('div',{staticClass:\"chatroom-container\"},[_vm._m(0),_c('main',{staticClass:\"chatroom__box\"},_vm._l((_vm.chatroomList),function(msg,index){return _c('ChatMsg',{key:index,attrs:{\"msg\":msg}})}),1),_c('footer',{staticClass:\"chatroom__send\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.text),expression:\"text\",modifiers:{\"trim\":true}}],staticClass:\"chatroom__send-input\",attrs:{\"type\":\"text\",\"placeholder\":\"輸入訊息...\"},domProps:{\"value\":(_vm.text)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage.apply(null, arguments)},\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('button',{staticClass:\"chatroom__send-btn\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.sendMessage.apply(null, arguments)}}},[_c('ChatBoxButtonSvg')],1)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"chatroom__header\"},[_c('p',{staticClass:\"chatroom__title\"},[_vm._v(\"公開聊天室\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user\"},[_c('div',{staticClass:\"user__avatar\"},[_c('router-link',{attrs:{\"to\":{name: 'profile-tweets', params: { userId: _vm.user.id } }}},[_c('img',{staticClass:\"user__avatar-img\",attrs:{\"src\":_vm.user.avatar || 'https://i.pinimg.com/originals/1f/7c/70/1f7c70f9b5b5f0e1972a4888468ed84c.jpg',\"alt\":\"\"}})])],1),_c('p',{staticClass:\"user__info\"},[_c('span',{staticClass:\"user__info-name\"},[_c('router-link',{attrs:{\"to\":{name: 'profile-tweets', params: { userId: _vm.user.id } }}},[_vm._v(\" \"+_vm._s(_vm.user.name)+\" \")])],1),_c('span',{staticClass:\"user__info-account\"},[_c('router-link',{attrs:{\"to\":{name: 'profile-tweets', params: { userId: _vm.user.id } }}},[_vm._v(\" @\"+_vm._s(_vm.user.account)+\" \")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user\">\n    <div class=\"user__avatar\">\n      <router-link :to=\"{name: 'profile-tweets', params: { userId: user.id } }\">\n        <img :src=\"user.avatar || 'https://i.pinimg.com/originals/1f/7c/70/1f7c70f9b5b5f0e1972a4888468ed84c.jpg'\" alt=\"\" class=\"user__avatar-img\">\n      </router-link>\n    </div>\n    <p class=\"user__info\">\n      <span class=\"user__info-name\">\n        <router-link :to=\"{name: 'profile-tweets', params: { userId: user.id } }\">\n          {{user.name}}\n        </router-link>\n      </span>\n      <span class=\"user__info-account\">\n        <router-link :to=\"{name: 'profile-tweets', params: { userId: user.id } }\">\n          @{{user.account}}\n        </router-link>\n      </span>\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'user',\n  props: {\n    user: {\n      type: Object,\n      default: () => {}\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.user {\n  display: flex;\n  padding: 1rem 0 1.5rem 1.5rem;\n  gap: 1rem;\n  align-items: center;\n  border-bottom: 1px solid var(--border-color);\n  &__avatar {\n    width: 5rem;\n    height: 5rem;\n    border-radius: 50%;\n    overflow: hidden;\n    &-img {\n      object-fit: cover;\n    }\n  }\n  &__info {\n    &-name {\n      font-size: $font-md;\n      font-weight: bold;\n      margin-right: 0.5rem;\n      & a {\n        color: var(--font-color);\n      }\n    }\n    &-account {\n      color: var(--label-color);\n      & a {\n        color: var(--label-color)\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=2eabb822&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.msg.status)?_c('div',{staticClass:\"chat-container\"},[(_vm.msg.user.id === _vm.currentUser.id)?_c('div',{staticClass:\"out\"},[_c('div',{staticClass:\"out__info\"},[_c('p',{staticClass:\"out__text\"},[_vm._v(\" \"+_vm._s(_vm.msg.message)+\" \")]),_c('p',{staticClass:\"out__timeStamp\"},[_vm._v(\" \"+_vm._s(_vm._f(\"absoluteTimeShort\")(_vm.msg.timeStamp))+\" \")])]),_c('div',{staticClass:\"out__avatar\"},[_c('router-link',{attrs:{\"to\":{ name: 'profile-tweets', params: { userId: _vm.msg.user.id } }}},[_c('img',{staticClass:\"out__avatar-img\",attrs:{\"src\":_vm.msg.user.avatar || 'https://i.pinimg.com/originals/1f/7c/70/1f7c70f9b5b5f0e1972a4888468ed84c.jpg',\"alt\":\"\"}})])],1)]):_c('div',{staticClass:\"in\"},[_c('div',{staticClass:\"in__avatar\"},[_c('router-link',{attrs:{\"to\":{ name: 'profile-tweets', params: { userId: _vm.msg.user.id } }}},[_c('img',{staticClass:\"in__avatar-img\",attrs:{\"src\":_vm.msg.user.avatar || 'https://i.pinimg.com/originals/1f/7c/70/1f7c70f9b5b5f0e1972a4888468ed84c.jpg',\"alt\":\"\"}})])],1),_c('div',{staticClass:\"in__info\"},[_c('p',{staticClass:\"in__text\"},[_vm._v(\" \"+_vm._s(_vm.msg.message)+\" \")]),_c('p',{staticClass:\"in__timeStamp\"},[_vm._v(\" \"+_vm._s(_vm._f(\"absoluteTimeShort\")(_vm.msg.timeStamp))+\" \")])])])]):_c('div',{staticClass:\"noti\"},[_c('span',{staticClass:\"noti__name\"},[_vm._v(\" \"+_vm._s(_vm.msg.name)+\" \")]),_c('span',{staticClass:\"noti__action\"},[_vm._v(\" \"+_vm._s(_vm.msg.status === 'on' ? '上線' : '離線')+\" \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"!msg.status\" class=\"chat-container\">\n    <div class=\"out\" v-if=\"msg.user.id === currentUser.id\">\n      <div class=\"out__info\">\n        <p class=\"out__text\"> {{msg.message}} </p>\n        <p class=\"out__timeStamp\"> {{msg.timeStamp | absoluteTimeShort}} </p>\n      </div>\n      <div class=\"out__avatar\">\n        <router-link :to=\"{ name: 'profile-tweets', params: { userId: msg.user.id } }\">\n          <img\n            :src=\"msg.user.avatar || 'https://i.pinimg.com/originals/1f/7c/70/1f7c70f9b5b5f0e1972a4888468ed84c.jpg'\"\n            alt=\"\"\n            class=\"out__avatar-img\"\n          />\n        </router-link>\n      </div>\n    </div>\n    <div class=\"in\" v-else>\n      <div class=\"in__avatar\">\n        <router-link :to=\"{ name: 'profile-tweets', params: { userId: msg.user.id } }\">\n          <img :src=\"msg.user.avatar || 'https://i.pinimg.com/originals/1f/7c/70/1f7c70f9b5b5f0e1972a4888468ed84c.jpg'\" alt=\"\" class=\"in__avatar-img\">\n        </router-link>\n      </div>\n      <div class=\"in__info\">\n        <p class=\"in__text\"> {{msg.message}} </p>\n        <p class=\"in__timeStamp\"> {{msg.timeStamp | absoluteTimeShort}} </p>\n      </div>\n    </div>\n  </div>\n  <div class=\"noti\" v-else>\n    <span class=\"noti__name\"> {{msg.name}} </span>\n    <span class=\"noti__action\"> {{ msg.status === 'on' ? '上線' : '離線' }} </span>\n  </div>\n</template>\n\n<script>\nimport { fromNowFilter } from './../mixins/helpers'\n\nexport default {\n  name: 'chat',\n  mixins: [fromNowFilter],\n  props: {\n    msg: {\n      type: Object,\n      required: true\n    }\n  },\n  computed: {\n    currentUser () {\n      return this.$store.state.currentUser\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.chat-container {\n  width: 100%;\n}\n.in,\n.out {\n  display: flex;\n  align-items: end;\n  width: max-content;\n  height: max-content;\n  gap: 1rem;\n  transform: rotate(180deg);\n  margin-top: 1rem;\n  margin-bottom: 3rem;\n  &__avatar {\n    flex-shrink: 0;\n    width: 4rem;\n    height: 4rem;\n    border-radius: 50%;\n    overflow: hidden;\n    &-img {\n      width: 4rem;\n      height: 4rem;\n      object-fit: cover;\n    }\n  }\n  &__info {\n    position: relative;\n  }\n  &__text {\n    background-color: var(--main-color);\n    padding: 1rem 1.5rem;\n    border-radius: 99em 99em 0em 99em;\n    color: white;\n    max-width: 50rem;\n  }\n  &__timeStamp {\n    position: absolute;\n    top: 105%;\n    right: 0;\n    font-size: $font-xs;\n    line-height: $font-xs;\n    color: var(--label-color);\n    width: max-content;\n  }\n}\n\n.in {\n  margin-left: auto;\n  &__text {\n    background-color: var(--border-color);\n    padding: 1rem 1.5rem;\n    border-radius: 99em 99em 99em 0;\n    color: var(--font-color);\n  }\n  &__timeStamp {\n    left: 0;\n  }\n}\n\n.noti {\n  background-color: #e5e5e5;\n  width: max-content;\n  padding: 0.7rem 1.4rem;\n  border-radius: 99em;\n  color: var(--label-color);\n  transform: rotate(180deg);\n  &__name {\n    margin-right: 0.3rem;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMsg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMsg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatMsg.vue?vue&type=template&id=a2a3d19e&\"\nimport script from \"./ChatMsg.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatMsg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatMsg.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"public-container\">\n    <div class=\"users-container\">\n      <header class=\"users__header\">\n        <p class=\"users__title\">上線使用者({{allOnlineUsers.length}})</p>\n      </header>\n      <User v-for=\"user in allOnlineUsers\" :key=\"user.id\" :user=\"user\"/>\n    </div>\n    <div class=\"chatroom-container\">\n      <header class=\"chatroom__header\">\n        <p class=\"chatroom__title\">公開聊天室</p>\n      </header>\n      <main class=\"chatroom__box\">\n        <ChatMsg v-for=\"(msg, index) in chatroomList\" :key=\"index\" :msg=\"msg\"/>\n      </main>\n      <footer class=\"chatroom__send\">\n        <input type=\"text\" class=\"chatroom__send-input\" placeholder=\"輸入訊息...\" v-model.trim=\"text\" @keyup.enter=\"sendMessage\">\n        <button class=\"chatroom__send-btn\" @click.stop.prevent=\"sendMessage\">\n          <ChatBoxButtonSvg />\n        </button>\n      </footer>\n    </div>\n  </div>\n</template>\n\n<script>\nimport User from './../components/User'\nimport ChatMsg from '../components/ChatMsg.vue'\nimport ChatBoxButtonSvg from '../components/ChatboxButtonSvg.vue'\nimport usersAPI from './../apis/users'\nimport { Toast } from './../mixins/helpers'\n\nexport default {\n  components: {\n    User,\n    ChatMsg,\n    ChatBoxButtonSvg\n  },\n  data () {\n    return {\n      chatroomList: [],\n      text: ''\n    }\n  },\n  computed: {\n    allOnlineUsers () {\n      return this.$store.state.allOnlineUsers\n    },\n    userStatus () {\n      return this.$store.state.userStatus\n    },\n    userMsg () {\n      return this.$store.state.userMsg\n    }\n  },\n  created () {\n    this.loginMessageHistory()\n    this.$socket.emit('USER_ONLINE', { user: { ...this.$store.state.currentUser, name: '' } })\n  },\n  methods: {\n    sendMessage () {\n      if (!this.text) { return }\n      const user = {\n        id: this.$store.state.currentUser.id,\n        name: this.$store.state.currentUser.name,\n        avatar: this.$store.state.currentUser.avatar\n      }\n      this.$socket.emit('MESSAGE', { user, message: this.text, timeStamp: new Date() })\n      this.text = ''\n    },\n    async loginMessageHistory () {\n      try {\n        const { data } = await usersAPI.getMessageHistory()\n        this.chatroomList = data\n      } catch (err) {\n        Toast.fire({\n          icon: 'fire',\n          title: '無法讀取歷史訊息'\n        })\n      }\n    }\n  },\n  watch: {\n    userStatus: {\n      handler () {\n        if (!this.userStatus.name) {\n          return\n        }\n        this.chatroomList.unshift(this.userStatus)\n      },\n      deep: true\n    },\n    userMsg: {\n      handler () {\n        this.chatroomList.unshift(this.userMsg)\n      },\n      deep: true\n    }\n  },\n  sockets: {\n    ONLINE_LIST_UPDATE (data) {\n      this.$store.commit('SOCKET_storeUserList', data)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.public-container {\n  flex: 1;\n  border-left: 1px solid var(--border-color);\n  display: flex;\n}\n.users {\n  &-container {\n    flex-basis: calc(390 / 1062 * 100%);\n  }\n  &__header {\n    padding: 1.5rem;\n    font-size: $font-xl;\n    font-weight: 700;\n    border-bottom: 1px solid var(--border-color);\n  }\n}\n\n.chatroom {\n  &-container {\n    flex: 1;\n    width: calc(673 / 1440 * 100%);\n    border-left: 1px solid var(--border-color);\n    position: relative;\n  }\n  &__header {\n    padding: 1.5rem;\n    font-size: $font-xl;\n    font-weight: 700;\n    border-bottom: 1px solid var(--border-color);\n    position: fixed;\n    top: 0;\n    width: calc(673 / 1440 * 100%);\n    z-index: 1;\n    background-color: #fff;\n  }\n  &__box {\n    height: 100vh;\n    overflow-y: auto;\n    padding: 8rem 1.5rem 5rem;\n    transform: rotate(180deg);\n  }\n  &__send {\n    position: fixed;\n    width: calc(673 / 1440 * 100%);\n    bottom: 0;\n    padding: 1.2rem 1.5rem 1.1rem 1.5rem;\n    z-index: 1;\n    background-color: #fff;\n    display: flex;\n    gap: 1.7rem;\n    align-items: center;\n    border-top: 1px solid var(--border-color);\n    &-input {\n      all: unset;\n      flex: 1;\n      background-color: var(--border-color);\n      border-radius: 99em;\n      padding: 0.8rem 0 0.8rem 1.5rem;\n      font-size: $font-md;\n    }\n  }\n}\n.noti {\n  margin: 0 auto 1.5rem;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoom.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatRoom.vue?vue&type=template&id=7e88d80e&\"\nimport script from \"./ChatRoom.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatRoom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatRoom.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMsg.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"width\":\"20\",\"height\":\"21\",\"viewBox\":\"0 0 20 21\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M19.1301 9.35798L1.61406 0.107979C1.32406 -0.0440207 0.97406 0.00597923 0.74106 0.233979C0.51106 0.459979 0.44806 0.810979 0.59106 1.10198L4.95306 10.022L0.59106 18.942C0.44806 19.234 0.51106 19.585 0.74106 19.81C0.88606 19.95 1.07406 20.022 1.26406 20.022C1.38406 20.022 1.50406 19.994 1.61406 19.935L19.1311 10.685C19.3761 10.555 19.5311 10.299 19.5311 10.021C19.5311 9.74298 19.3761 9.48898 19.1311 9.35898L19.1301 9.35798ZM2.94806 2.50998L15.7521 9.27198H6.25506L2.94806 2.51198V2.50998ZM6.25506 10.77H15.7531L2.94806 17.535L6.25506 10.772V10.77Z\",\"fill\":\"#FF6600\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./ChatboxButtonSvg.vue?vue&type=template&id=05977345&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoom.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}