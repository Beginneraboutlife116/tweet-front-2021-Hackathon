{"version":3,"sources":["webpack:///./src/views/Twitter.vue?f2a0","webpack:///./src/apis/followships.js","webpack:///./src/components/Top.vue?defe","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/views/Twitter.vue?72e1","webpack:///./src/components/Top.vue?da38","webpack:///src/components/Top.vue","webpack:///./src/components/Top.vue?8099","webpack:///./src/components/Top.vue","webpack:///src/views/Twitter.vue","webpack:///./src/views/Twitter.vue?e68f","webpack:///./src/views/Twitter.vue"],"names":["getFollowings","userId","apiHelper","get","getFollowers","getTopFollow","addFollow","id","post","cancelFollow","delete","$","$map","map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","toChangeFollowStatus","on","afterToggleFollow","staticRenderFns","_m","_l","top","key","avatar","_v","_s","name","account","currentUser","class","active","isFollowing","disabled","isProcessing","$event","stopPropagation","preventDefault","_e","props","type","Array","default","data","tops","computed","watch","handler","deep","methods","toggleProcessing","created","fetchTops","component","components","Top","payload"],"mappings":"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","file":"js/chunk-025606c4.4dcbda94.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Twitter.vue?vue&type=style&index=0&lang=scss&\"","import { apiHelper } from './../mixins/helpers'\n\nexport default {\n  getFollowings (userId) {\n    return apiHelper.get(`/users/${userId}/followings`)\n  },\n  getFollowers (userId) {\n    return apiHelper.get(`/users/${userId}/followers`)\n  },\n  getTopFollow () {\n    return apiHelper.get('/followships/top')\n  },\n  addFollow (id) {\n    return apiHelper.post('/followships', { id })\n  },\n  cancelFollow (id) {\n    return apiHelper.delete(`/followships/${id}`)\n  }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Top.vue?vue&type=style&index=0&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"twitter-container\"},[_c('router-view',{attrs:{\"to-change-follow-status\":_vm.toChangeFollowStatus},on:{\"after-toggle-follow\":_vm.afterToggleFollow}}),_c('Top',{attrs:{\"to-change-follow-status\":_vm.toChangeFollowStatus},on:{\"after-toggle-follow\":_vm.afterToggleFollow}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"top-container\"},[_c('main',{staticClass:\"top\"},[_vm._m(0),_vm._l((_vm.tops),function(top){return _c('div',{key:top.id,staticClass:\"top__user\"},[_c('router-link',{attrs:{\"to\":(\"/home/\" + (top.id))}},[_c('div',{staticClass:\"top__user-avatar\"},[_c('img',{staticClass:\"top__user-avatar--img\",attrs:{\"src\":top.avatar}})])]),_c('div',{staticClass:\"top__user-info\"},[_c('div',[_c('router-link',{attrs:{\"to\":(\"/home/\" + (top.id))}},[_c('p',{staticClass:\"top__user-info--name\"},[_vm._v(\" \"+_vm._s(top.name)+\" \")])]),_c('router-link',{attrs:{\"to\":(\"/home/\" + (top.id))}},[_c('p',{staticClass:\"top__user-info--account\"},[_vm._v(\" @\"+_vm._s(top.account)+\" \")])])],1),(top.id !== _vm.currentUser.id)?_c('button',{staticClass:\"top__user-info--follow\",class:{active: top.isFollowing, disabled: top.isProcessing},attrs:{\"disabled\":top.isProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();top.isFollowing ? _vm.cancelFollow(top.id) : _vm.addFollow(top.id)}}},[_vm._v(\" \"+_vm._s(top.isFollowing ? '正在跟隨' : '跟隨')+\" \")]):_vm._e()])],1)})],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"top__header\"},[_c('p',{staticClass:\"top__header-title\"},[_vm._v(\"Popular\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"top-container\">\n    <main class=\"top\">\n      <header class=\"top__header\">\n        <p class=\"top__header-title\">Popular</p>\n      </header>\n      <div class=\"top__user\" v-for=\"top in tops\" :key=\"top.id\">\n        <router-link :to=\"`/home/${top.id}`\">\n          <div class=\"top__user-avatar\">\n            <img :src=\"top.avatar\" class=\"top__user-avatar--img\">\n          </div>\n        </router-link>\n        <div class=\"top__user-info\">\n          <div>\n            <router-link :to=\"`/home/${top.id}`\">\n              <p class=\"top__user-info--name\"> {{top.name}} </p>\n            </router-link>\n            <router-link :to=\"`/home/${top.id}`\">\n              <p class=\"top__user-info--account\"> @{{top.account}} </p>\n            </router-link>\n          </div>\n          <button v-if=\"top.id !== currentUser.id\" class=\"top__user-info--follow\" :class=\"{active: top.isFollowing, disabled: top.isProcessing}\" :disabled=\"top.isProcessing\" @click.stop.prevent=\"top.isFollowing ? cancelFollow(top.id) : addFollow(top.id)\"> {{top.isFollowing ? '正在跟隨' : '跟隨'}} </button>\n        </div>\n      </div>\n    </main>\n  </section>\n</template>\n\n<script>\nimport { Toast } from './../mixins/helpers'\nimport followshipsAPI from '../apis/followships'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'Top',\n  props: {\n    toChangeFollowStatus: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data () {\n    return {\n      tops: []\n    }\n  },\n  computed: {\n    ...mapState(['currentUser'])\n  },\n  watch: {\n    toChangeFollowStatus: {\n      handler () {\n        this.tops = this.tops.map(top => {\n          if (top.id === this.toChangeFollowStatus[0]) {\n            return {\n              ...top,\n              isFollowing: this.toChangeFollowStatus[1]\n            }\n          }\n          return {\n            ...top\n          }\n        })\n      },\n      deep: true\n    }\n  },\n  methods: {\n    async fetchTops () {\n      try {\n        const { data } = await followshipsAPI.getTopFollow()\n        this.tops = data.results.map(data => {\n          return {\n            ...data,\n            name: data.name || 'NoName',\n            avatar: data.avatar || 'https://i.pinimg.com/originals/1f/7c/70/1f7c70f9b5b5f0e1972a4888468ed84c.jpg',\n            isProcessing: false\n          }\n        })\n      } catch (err) {\n        Toast.fire({\n          icon: 'error',\n          title: '無法讀取到熱門使用者資訊，請稍後再試'\n        })\n      }\n    },\n    toggleProcessing (id) {\n      this.tops = this.tops.map(top => {\n        if (top.id === id) {\n          return {\n            ...top,\n            isProcessing: !top.isProcessing\n          }\n        } else {\n          return {\n            ...top\n          }\n        }\n      })\n    },\n    async addFollow (id) {\n      try {\n        this.toggleProcessing(id)\n        const { data } = await followshipsAPI.addFollow(id)\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        this.tops = this.tops.map(top => {\n          if (top.id === id) {\n            return {\n              ...top,\n              isFollowing: true,\n              isProcessing: !top.isProcessing\n            }\n          } else {\n            return {\n              ...top\n            }\n          }\n        })\n        this.$emit('after-toggle-follow', [id, true])\n        Toast.fire({\n          icon: 'success',\n          title: '跟隨成功！'\n        })\n      } catch (err) {\n        this.toggleProcessing(id)\n        Toast.fire({\n          icon: 'error',\n          title: '無法跟隨或取消跟隨該使用者，請稍後再試'\n        })\n      }\n    },\n    async cancelFollow (id) {\n      try {\n        this.toggleProcessing(id)\n        const { data } = await followshipsAPI.cancelFollow(id)\n        this.tops = this.tops.map(top => {\n          if (top.id === id) {\n            return {\n              ...top,\n              isFollowing: false,\n              isProcessing: !top.isProcessing\n            }\n          } else {\n            return {\n              ...top\n            }\n          }\n        })\n        Toast.fire({\n          icon: 'success',\n          title: `${data.message}!`\n        })\n        this.$emit('after-toggle-follow', [id, false])\n      } catch (err) {\n        this.toggleProcessing(id)\n        Toast.fire({\n          icon: 'error',\n          title: '無法跟隨或取消跟隨該使用者，請稍後再試'\n        })\n      }\n    }\n  },\n  created () {\n    this.fetchTops()\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.top-container {\n  grid-column: 2;\n  padding: 1.5rem 0 0 3rem;\n}\n\n.top {\n  width: calc( 350 / 462 * 100% );\n  border-radius: 1.4rem;\n  background-color: var(--fill-color);\n  box-shadow: 0 4px 4px 0 hsla(0, 0, 0, 25%);\n  &__header {\n    padding: 1rem 0 1rem 1.5rem;\n    &-title {\n      font-size: $font-lg;\n      font-weight: bold;\n    }\n  }\n  &__user {\n    display: flex;\n    height: 7rem;\n    padding: 1rem 1.5rem;\n    border-top: 1px solid var(--border-color);\n    &-avatar {\n      width: 5rem;\n      height: 5rem;\n      border-radius: 50%;\n      margin-right: 1rem;\n      overflow: hidden;\n      &--img {\n        object-fit: cover;\n      }\n    }\n    &-info {\n      flex: 1 0;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      &--name {\n        color: var(--font-color);\n        margin-bottom: 3px;\n      }\n      &--name:hover {\n        color: var(--main-color);\n      }\n      &--name,\n      &--account {\n        font-size: $font-md;\n        line-height: $font-md;\n        font-weight: bold;\n      }\n      &--account {\n        color: var(--label-color);\n      }\n      &--account:hover {\n        color: var(--main-color);\n      }\n      &--follow {\n        @extend %buttonStyle;\n        padding: 1rem 1.5rem;\n        font-size: $font-md;\n        line-height: $font-md;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Top.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Top.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Top.vue?vue&type=template&id=4e9bb467&\"\nimport script from \"./Top.vue?vue&type=script&lang=js&\"\nexport * from \"./Top.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Top.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"twitter-container\">\n    <router-view @after-toggle-follow=\"afterToggleFollow\" :to-change-follow-status=\"toChangeFollowStatus\"/>\n    <Top :to-change-follow-status=\"toChangeFollowStatus\" @after-toggle-follow=\"afterToggleFollow\"/>\n  </div>\n</template>\n\n<script>\nimport Top from '../components/Top.vue'\nexport default {\n  components: {\n    Top\n  },\n  data () {\n    return {\n      toChangeFollowStatus: []\n    }\n  },\n  methods: {\n    afterToggleFollow (payload) {\n      this.toChangeFollowStatus = payload\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.twitter-container {\n  flex: calc(100% - 26.25%);\n  display: grid;\n  grid-template-columns: 1fr calc( 462 / 1062 * 100% );\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Twitter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Twitter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Twitter.vue?vue&type=template&id=8e715dfa&\"\nimport script from \"./Twitter.vue?vue&type=script&lang=js&\"\nexport * from \"./Twitter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Twitter.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}