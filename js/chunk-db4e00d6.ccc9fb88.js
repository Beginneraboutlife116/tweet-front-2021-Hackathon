(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db4e00d6"],{"00b4":function(e,t,r){"use strict";r("ac1f");var s=r("23e7"),a=r("da84"),i=r("c65b"),n=r("e330"),o=r("1626"),c=r("861d"),l=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=a.Error,u=n(/./.test);s({target:"RegExp",proto:!0,forced:!l},{test:function(e){var t=this.exec;if(!o(t))return u(this,e);var r=i(t,this,e);if(null!==r&&!c(r))throw new d("RegExp exec method returned something other than an Object or null");return!!r}})},"0b2a":function(e,t,r){},"107c":function(e,t,r){var s=r("d039"),a=r("da84"),i=a.RegExp;e.exports=s((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"4ef5":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"setting-container"},[r("div",{staticClass:"setting"},[e._m(0),r("form",{staticClass:"setting__form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[r("label",{staticClass:"setting__form-row"},[r("p",{staticClass:"setting__form-title account"},[e._v("帳號")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.editUser.account,expression:"editUser.account",modifiers:{trim:!0}}],ref:"account",staticClass:"setting__form-input account",attrs:{type:"text",placeholder:e.prevAccount,value:"editUser.account",maxlength:"30",required:""},domProps:{value:e.editUser.account},on:{input:function(t){t.target.composing||e.$set(e.editUser,"account",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("p",{staticClass:"setting__form-error"},[e.accountRepeat?r("span",{staticClass:"error"},[e._v("帳號 已重複註冊！")]):e._e()])]),r("label",{staticClass:"setting__form-row"},[r("p",{staticClass:"setting__form-title"},[e._v("名稱")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.editUser.name,expression:"editUser.name",modifiers:{trim:!0}}],ref:"name",staticClass:"setting__form-input",attrs:{type:"text",value:"editUser.name",placeholder:e.prevName,maxlength:"50",required:""},domProps:{value:e.editUser.name},on:{input:function(t){t.target.composing||e.$set(e.editUser,"name",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("p",{staticClass:"setting__form-error"},[r("span",{directives:[{name:"show",rawName:"v-show",value:e.editUser.name.length,expression:"editUser.name.length"}],staticClass:"error",style:{color:e.nameErrorHandler.color}},[e._v(" "+e._s(e.nameErrorHandler.text)+" ")]),r("span",{directives:[{name:"show",rawName:"v-show",value:e.editUser.name.length,expression:"editUser.name.length"}],staticClass:"limit"},[e._v(" "+e._s(e.editUser.name.length)+"/50")])])]),r("label",{staticClass:"setting__form-row"},[r("p",{staticClass:"sign__form-title"},[e._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.editUser.email,expression:"editUser.email",modifiers:{trim:!0}}],ref:"email",staticClass:"setting__form-input",attrs:{type:"email",placeholder:e.prevEmail,value:"editUser.email",required:""},domProps:{value:e.editUser.email},on:{input:function(t){t.target.composing||e.$set(e.editUser,"email",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("p",{staticClass:"setting__form-error"},[e.emailRepeat?r("span",{staticClass:"error"},[e._v("Email 已重複註冊！")]):e._e()])]),r("label",{staticClass:"setting__form-row"},[r("p",{staticClass:"setting__form-title"},[e._v("密碼")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.password,expression:"password",modifiers:{trim:!0}}],ref:"password",staticClass:"setting__form-input",attrs:{type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("label",{staticClass:"setting__form-row"},[r("p",{staticClass:"setting__form-title"},[e._v("密碼確認")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.passwordConfirm,expression:"passwordConfirm",modifiers:{trim:!0}}],ref:"passwordConfirm",staticClass:"setting__form-input",attrs:{type:"password",required:""},domProps:{value:e.passwordConfirm},on:{input:function(t){t.target.composing||(e.passwordConfirm=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("p",{staticClass:"setting__form-error"},[e.passwordError?r("span",{staticClass:"error"},[e._v("確認密碼與密碼不符，請再試一次")]):e._e()])]),r("button",{staticClass:"setting__form-submit active",class:{disabled:e.isProcessing||e.waitForFill},attrs:{type:"submit",disabled:e.waitForFill}},[e._v(" "+e._s(e.isProcessing?"傳送中":"儲存")+" ")])])])])},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{staticClass:"setting__header"},[r("p",{staticClass:"setting__header-title"},[e._v("帳號設定")])])}],i=r("1da1"),n=(r("96cf"),r("b0c0"),r("fb6a"),r("ac1f"),r("00b4"),r("b132")),o=r("4cce"),c={name:"Setting",data:function(){return{editUser:{},prevName:"",prevAccount:"",prevEmail:"",password:"",passwordConfirm:"",accountRepeat:!1,emailRepeat:!1,passwordError:!1,isProcessing:!1}},computed:{nameErrorHandler:function(){var e={};return e.borderColor=this.editUser.name.length>50?"#fc5a5a":"",e.color=this.editUser.name.length>50?"#fc5a5a":"#0099ff",e.text=this.editUser.name.length>50?"字數超出上限！":"字數正確",e},waitForFill:function(){return!(this.editUser.account&&this.editUser.email&&this.password&&this.passwordConfirm&&this.editUser.name)}},methods:{fetchCurrentUser:function(){var e=this.$store.state.currentUser,t=e.id,r=e.name,s=e.account,a=e.email;this.editUser={id:t,name:r,account:s,email:a},this.prevName=r,this.prevAccount=s,this.prevEmail=a},handleSubmit:function(){return this.$refs.account.style.borderColor="",this.$refs.email.style.borderColor="",this.$refs.password.style.borderColor="",this.$refs.passwordConfirm.style.borderColor="",this.$refs.name.style.borderColor="",this.accountRepeat=!1,this.emailRepeat=!1,this.editUser.account?this.editUser.name?(this.editUser.name>50&&(this.editUser.name=this.editUser.name.slice(0,50)),this.editUser.email?this.verifyEmail(this.editUser.email)?this.password?this.passwordConfirm?this.password!==this.passwordConfirm?(n["a"].fire({icon:"error",title:"密碼不相符，請再試一次"}),this.passwordError=!0,this.$refs.passwordConfirm.focus(),void(this.$refs.passwordConfirm.style.borderColor="#fc5a5a")):void this.editUserInfo():(n["a"].fire({icon:"warning",title:"請再輸入一次密碼做確認"}),this.$refs.passwordConfirm.focus(),void(this.$refs.passwordConfirm.style.borderColor="#fc5a5a")):(n["a"].fire({icon:"warning",title:"請輸入密碼"}),this.$refs.password.focus(),void(this.$refs.password.style.borderColor="#fc5a5a")):(n["a"].fire({icon:"warning",title:"無效的Email，請再次確認"}),this.$refs.email.focus(),void(this.$refs.email.style.borderColor="#fc5a5a")):(n["a"].fire({icon:"warning",title:"Email必填"}),this.$refs.email.focus(),void(this.$refs.email.style.borderColor="#fc5a5a"))):(n["a"].fire({icon:"warning",title:"名稱必填"}),this.$refs.name.focus(),void(this.$refs.name.style.borderColor="#fc5a5a")):(n["a"].fire({icon:"warning",title:"帳號必填"}),this.$refs.account.focus(),void(this.$refs.account.style.borderColor="#fc5a5a"))},editUserInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isProcessing=!0,t.next=4,o["a"].putUserEdit(e.editUser.id,{account:e.editUser.account,name:e.editUser.name,email:e.editUser.email,password:e.password,checkPassword:e.passwordConfirm});case 4:if(r=t.sent,s=r.data,"success"===s.status){t.next=8;break}throw new Error(s.message);case 8:n["a"].fire({icon:"success",title:"".concat(s.message)}),e.$store.commit("setCurrentUser",{account:e.editUser.account,name:e.editUser.name,email:e.editUser.email,password:e.password}),e.$router.push("/home"),t.next=19;break;case 13:t.prev=13,t.t0=t["catch"](0),e.isProcessing=!1,"account已重複註冊！"===t.t0.message&&(e.$refs.account.focus(),e.$refs.account.style.borderColor="#fc5a5a",e.accountRepeat=!0),"email已重複註冊！"===t.t0.message&&(e.$refs.email.focus(),e.$refs.email.style.borderColor="#fc5a5a",e.emailRepeat=!0),n["a"].fire({icon:"error",title:"".concat(t.t0.message)});case 19:case"end":return t.stop()}}),t,null,[[0,13]])})))()},verifyEmail:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}},created:function(){this.fetchCurrentUser()}},l=c,d=(r("a299"),r("2877")),u=Object(d["a"])(l,s,a,!1,null,null,null);t["default"]=u.exports},9263:function(e,t,r){"use strict";var s=r("c65b"),a=r("e330"),i=r("577e"),n=r("ad6d"),o=r("9f7f"),c=r("5692"),l=r("7c73"),d=r("69f3").get,u=r("fce3"),m=r("107c"),f=c("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,v=p,h=a("".charAt),g=a("".indexOf),w=a("".replace),_=a("".slice),C=function(){var e=/a/,t=/b*/g;return s(p,e,"a"),s(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),b=o.UNSUPPORTED_Y||o.BROKEN_CARET,x=void 0!==/()??/.exec("")[1],U=C||x||b||u||m;U&&(v=function(e){var t,r,a,o,c,u,m,U=this,$=d(U),E=i(e),y=$.raw;if(y)return y.lastIndex=U.lastIndex,t=s(v,y,E),U.lastIndex=y.lastIndex,t;var R=$.groups,I=b&&U.sticky,P=s(n,U),N=U.source,A=0,k=E;if(I&&(P=w(P,"y",""),-1===g(P,"g")&&(P+="g"),k=_(E,U.lastIndex),U.lastIndex>0&&(!U.multiline||U.multiline&&"\n"!==h(E,U.lastIndex-1))&&(N="(?: "+N+")",k=" "+k,A++),r=new RegExp("^(?:"+N+")",P)),x&&(r=new RegExp("^"+N+"$(?!\\s)",P)),C&&(a=U.lastIndex),o=s(p,I?r:U,k),I?o?(o.input=_(o.input,A),o[0]=_(o[0],A),o.index=U.lastIndex,U.lastIndex+=o[0].length):U.lastIndex=0:C&&o&&(U.lastIndex=U.global?o.index+o[0].length:a),x&&o&&o.length>1&&s(f,o[0],r,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(o[c]=void 0)})),o&&R)for(o.groups=u=l(null),c=0;c<R.length;c++)m=R[c],u[m[0]]=o[m[1]];return o}),e.exports=v},"9f7f":function(e,t,r){var s=r("d039"),a=r("da84"),i=a.RegExp;t.UNSUPPORTED_Y=s((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=s((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a299:function(e,t,r){"use strict";r("0b2a")},ac1f:function(e,t,r){"use strict";var s=r("23e7"),a=r("9263");s({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},fb6a:function(e,t,r){"use strict";var s=r("23e7"),a=r("da84"),i=r("e8b5"),n=r("68ee"),o=r("861d"),c=r("23cb"),l=r("07fa"),d=r("fc6a"),u=r("8418"),m=r("b622"),f=r("1dde"),p=r("f36a"),v=f("slice"),h=m("species"),g=a.Array,w=Math.max;s({target:"Array",proto:!0,forced:!v},{slice:function(e,t){var r,s,a,m=d(this),f=l(m),v=c(e,f),_=c(void 0===t?f:t,f);if(i(m)&&(r=m.constructor,n(r)&&(r===g||i(r.prototype))?r=void 0:o(r)&&(r=r[h],null===r&&(r=void 0)),r===g||void 0===r))return p(m,v,_);for(s=new(void 0===r?g:r)(w(_-v,0)),a=0;v<_;v++,a++)v in m&&u(s,a,m[v]);return s.length=a,s}})},fce3:function(e,t,r){var s=r("d039"),a=r("da84"),i=a.RegExp;e.exports=s((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-db4e00d6.ccc9fb88.js.map